<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Creating the rootservices document</title><link rel="stylesheet" href="https://oslc.github.io/developing-oslc-applications/css/oslc.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/solid.css" integrity="sha384-QokYePQSOwpBDuhlHOsX0ymF6R/vLk/UQVz3WHa6wygxI5oGTmDTv8wahFOSspdm" crossorigin="anonymous"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/fontawesome.css" integrity="sha384-vd1e11sR28tEK9YANUtpIOdjGW14pS87bUBuOIoBILVWLFnS+MCX9T6MMf0VdPGq" crossorigin="anonymous"><script src="https://oslc.github.io/developing-oslc-applications/js/lib/modernizr.js"></script><script>// add .mustard/.no-mustard css classes
Modernizr.addTest( 'mustard', 'querySelector' in document && 'localStorage' in window && 'addEventListener' in window );

Modernizr.load([{
  test: Modernizr.mustard,
  yep: 'https://oslc.github.io/developing-oslc-applications/css/oslc_enhanced.css'
}]);

</script></head><body><header class="header"><div class="flag"><div class="image"><button title="Main menu" role="button" aria-label="Toggle Navigation" data-toggle-class="primary-nav-is-open" data-toggle-target="body" class="navburger mustard-only"><span class="navburger-line top"></span><span class="navburger-line middle"></span><span class="navburger-line bottom"></span></button></div><div class="body"><a href="https://oslc.github.io/developing-oslc-applications/" class="flag image-link"><div class="image"><img src="https://oslc.github.io/developing-oslc-applications/img/logo-old-50px.png" class="logo-img"></div><div class="body"><span class="logo-text"><abbr title="Open Services for Lifecycle Collaboration" class="oslc-name">OSLC</abbr><br><span class="project-name">Developer Guide</span></span></div></a></div></div></header><div class="sticky-footer-body off-canvas-wrap"><nav class="nav"><div class="menu primary"><div class="item desk-up"><a href="https://oslc.github.io/developing-oslc-applications/" class="image-link"><img src="https://oslc.github.io/developing-oslc-applications/img/logo-old-big.gif"><span class="logo-text"><abbr title="Open Services for Lifecycle Collaboration" class="oslc-name">OSLC</abbr><span class="project-name">Developer Guide</span></span></a></div><ul class="items"><li role="presentation" class="item"><a href="https://open-services.net/" target="_blank">Open Services for Lifecycle Collaboration homepage <i class="fas fa-external-link-alt"></i></a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/developer-guide.html">Developer Guide</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/environment-setup.html">eclipse environment setup</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/toolchain-model.html">The toolchain model</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/code-generator.html">Generating the server code</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/exploring-the-code.html">Exploring the generated code</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/ssl-support.html">https and SSL support</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/authentication.html">Authentication</a></li><li role="presentation" class="item current"><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/rootservices.html">Creating the rootservices document</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/consumer-friend.html">Connecting Servers</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/artifact-container-associations.html">Artifact Container Associations</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/dialogs.html">Updating generated dialogs</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/implement-domain-class.html">Implementing a Domain Class</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/trs-provider.html">Implementing a TRS Provider</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/iotp_adaptor/junit-tests.html">JUnit Tests</a></li></ul></div></nav><main class="main"><div class="card"><header class="header"><h1 class="title">Creating the rootservices document</h1></header><section class="content"><div class="copy"><p>All the jazz.net application provide and expect a <code>rootservices</code> resource that provides some initial configuration and discovery information the applications need to function, and to integrate with other applications. See the <a href="https://jazz.net/wiki/bin/view/Main/RootServicesSpec">Root Services Specification</a> for details. Note that access to this specification requires jazz.net login. There is no RDF or OWL vocabulary at <a href="http://jazz.net/ns">http://jazz.net/ns</a> for rootserices documents.  </p>
<p>The URL for the rootservices document has to be provided when adding a Friend to an consuming jazz.net application. This rootservices document provide the information the consuming server needs in order to use OSLC services provided by the server.</p>
<p>iotp-adaptor, and other servers that want to integrate with the jazz.net apps need to provide at least three categories of information:</p>
<ol>
<li>The URLs to the provided service provider catalog - for artifact container associations</li>
<li>The OAuth authentication URLs - for OAuth authentication when adding a friend</li>
<li>The TRS provider - for adding LQE data sources</li>
</ol>
<h2>Sample iotp-adaptor rootservices resource</h2><p>Here&#39;s a sample of the iotp-adaptor rootservices document, and a sample of the minimum information a server needs to provide for the jazz.net apps to be able to integrate with them:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;rdf:Description rdf:about=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/rootservices&quot;
    xmlns:iotp=&quot;http://jazz.net/ns/iot#&quot;
    xmlns:bmx=&quot;http://jazz.net/ns/bmx#&quot;
    xmlns:oslc=&quot;http://open-services.net/ns/core#&quot;
    xmlns:oslc_am=&quot;http://open-services.net/ns/am#&quot;
    xmlns:oslc_rm=&quot;http://open-services.net/xmlns/rm/1.0/&quot;
    xmlns:oslc_cm=&quot;http://open-services.net/xmlns/cm/1.0/&quot;
    xmlns:trs=&quot;http://open-services.net/ns/core/trs#&quot;
    xmlns:dc=&quot;http://purl.org/dc/terms/&quot;
    xmlns:jfs=&quot;http://jazz.net/xmlns/prod/jazz/jfs/1.0/&quot; 
    xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;&gt;

    &lt;dc:title&gt;OSLC AM iotp-adaptor Jazz Root Services&lt;/dc:title&gt;

    &lt;!-- OAuth URLs for establishing server-to-server connections --&gt;
    &lt;jfs:oauthRealmName&gt;IoTPlatform&lt;/jfs:oauthRealmName&gt;
    &lt;jfs:oauthDomain&gt;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp&lt;/jfs:oauthDomain&gt;
    &lt;jfs:oauthRequestConsumerKeyUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/requestKey&quot; /&gt;
    &lt;jfs:oauthApprovalModuleUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/approveKey&quot; /&gt;
    &lt;jfs:oauthRequestTokenUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/requestToken&quot;/&gt;
    &lt;jfs:oauthUserAuthorizationUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/authorize&quot; /&gt;
    &lt;jfs:oauthAccessTokenUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/accessToken&quot;/&gt;

    &lt;!-- Service Providers - ServiceProviderCatalog URLs for each domain --&gt;
    &lt;oslc_am:amServiceProviders rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/catalog/singleton&quot; /&gt;
    &lt;oslc_rm:rmServiceProviders rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/catalog/singleton&quot; /&gt;
    &lt;oslc_cm:cmServiceProviders rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/catalog/singleton&quot; /&gt;

    &lt;!-- IoT Platform Tracked Resource Set Provider --&gt;
    &lt;iotp:trackedResourceSetProvider&gt;
        &lt;trs:TrackedResourceSetProvider&gt;
            &lt;trs:trackedResourceSet rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/trs&quot; /&gt;
            &lt;dc:title&gt;TRS 2.0 for IoT Platform Resources&lt;/dc:title&gt;
            &lt;dc:description&gt;TRS 2.0 feed for IoT Platform resources&lt;/dc:description&gt;
            &lt;dc:type     rdf:resource=&quot;http://open-services.net/ns/cm#&quot; /&gt;
            &lt;oslc:domain rdf:resource=&quot;http://open-services.net/ns/cm#&quot; /&gt;
            &lt;oslc:domain rdf:resource=&quot;http://open-services.net/ns/am#&quot; /&gt;
        &lt;/trs:TrackedResourceSetProvider&gt;
    &lt;/iotp:trackedResourceSetProvider&gt;
&lt;/rdf:Description&gt;</code></pre><h2>OAuth Authentication</h2><p>The rootservices document is an unprotected resource, a resource that does not require authentication in order to be accessed. The reason for this is that the URLs for the OAuth authentication sequence must be accessible, and so these are provided in an unprotected resource.</p>
<p>The <a href="https://oauth.net/core/1.0a/">OAuth1.0a</a> sequence requires a set of URLs that the server provides and clients use to authenticate communication. The names of the properties in the rootservices resource correspond closely to their names in the OAuth1.0a protocol.</p>
<pre><code>    &lt;jfs:oauthRealmName&gt;IoTPlatform&lt;/jfs:oauthRealmName&gt;
    &lt;jfs:oauthDomain&gt;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp&lt;/jfs:oauthDomain&gt;
    &lt;jfs:oauthRequestConsumerKeyUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/requestKey&quot; /&gt;
    &lt;jfs:oauthApprovalModuleUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/approveKey&quot; /&gt;
    &lt;jfs:oauthRequestTokenUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/requestToken&quot;/&gt;
    &lt;jfs:oauthUserAuthorizationUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/authorize&quot; /&gt;
    &lt;jfs:oauthAccessTokenUrl rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/oauth/accessToken&quot;/&gt;</code></pre><h2>Service Providers</h2><p>Once the consumer app has successfully added, authenticated and accepted the provisional consumer key, the jazz.net applications can now communicate with the iotp-adaptor server. But in order for the consumer to use any of the server&#39;s OSLC services, it needs to discover what services are provided and get the URLs used to access the services. </p>
<p>The rootservices document defines a number of service providers for this purpose, each of which provides the URL to the ServiceProviderCatalog for a given set of domain services.</p>
<pre><code>    &lt;oslc_am:amServiceProviders rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/catalog/singleton&quot; /&gt;
    &lt;oslc_rm:rmServiceProviders rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/catalog/singleton&quot; /&gt;
    &lt;oslc_cm:cmServiceProviders rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/catalog/singleton&quot; /&gt;</code></pre><p>iotp-adaptor resources are all modeled to be subclasses of oslc_am:Resource, but are &quot;marked&quot; to masquerade as oslc_rm:Requirement and oslc_cm:ChangeRequest in order to be able to participate as link targets to standard OSLC domain link types supported by the jazz.net applications. See <a href="./toolchain-model">The toolchain model</a> for details.</p>
<p>The service provider catalog URLs are used to access OSLC discovery resources to so the client can discover what OSLC services are available, and at what URL.</p>
<p><img src="./images/CoreDiscovery.png" alt="OSLC Discovery Capability" title="OSLC Discovery Capability"></p>
<h2>TRS Provider</h2><p>The rootservices document also provides discovery information for the Tracked Resource Sets (TRS) the server provides. Each TRS provides the following information as defined in the <a href="http://open-services.net/wiki/core/TrackedResourceSet-2.0/">OSLC Tracked Resource Set Specification</a>:</p>
<ul>
<li>trackedResourceSet: The base URL for accessing the TRS base resources and changeLog.</li>
<li>title: the title of the TRS provider, shown in the LQE data source views</li>
<li>type: the type of the TRS resources, the &quot;machine readable&quot; identifier to compare for uniqueness - does not need to be dereferenceable</li>
<li>domain: the OSLC domain(s) of the TRS resources</li>
</ul>
<p>The iotp-adaptor provides a simple TRS 2.0 provider for AM and CM resources:</p>
<pre><code>    &lt;trs:TrackedResourceSetProvider&gt;
        &lt;trs:trackedResourceSet rdf:resource=&quot;https://ce4iot.rtp.raleigh.ibm.com:9443/iotp/services/trs&quot; /&gt;
        &lt;dc:title&gt;TRS 2.0 for IoT Platform Resources&lt;/dc:title&gt;
        &lt;dc:description&gt;TRS 2.0 feed for IoT Platform resources&lt;/dc:description&gt;
        &lt;dc:type     rdf:resource=&quot;http://open-services.net/ns/cm#&quot; /&gt;
        &lt;oslc:domain rdf:resource=&quot;http://open-services.net/ns/cm#&quot; /&gt;
        &lt;oslc:domain rdf:resource=&quot;http://open-services.net/ns/am#&quot; /&gt;
    &lt;/trs:TrackedResourceSetProvider&gt;</code></pre><h2>Implementing the rootservices Document</h2><p>The iotp-adaptor rootservices resource is provided the RootServicesService servlet which sets some request attributes and the dispatches to <code>/rootservices_rdfxml.jsp</code>. The URL to the RootServicesServices servlet is specified in the web.xml file. By convention the URL is the base URL of the server followed by <code>/rootservices</code>.</p>
<pre><code>    &lt;servlet&gt;
        &lt;servlet-name&gt;RootServicesService&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.ibm.oslc.adaptor.iotp.impl.RootServicesService&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;RootServicesService&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/rootservices&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;</code></pre><p>The <code>/rootservices_rdfxml.jsp</code> file is a simple JSP page that uses the request attributes set by the servlet and then simply outputs the RDF/XML directly.</p>
<pre><code>&lt;%@ page contentType=&quot;application/rdf+xml&quot; language=&quot;java&quot; pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%
String baseUri = (String) request.getAttribute(&quot;baseUri&quot;);
String catalogUri = (String) request.getAttribute(&quot;catalogUri&quot;);
String oauthDomain = (String) request.getAttribute(&quot;oauthDomain&quot;);
String about = (String) request.getAttribute(&quot;about&quot;);
%&gt;
&lt;rdf:Description rdf:about=&quot;&lt;%= about %&gt;&quot;
    xmlns:iotp=&quot;http://jazz.net/ns/dm/iotp#&quot;
    xmlns:oslc_am=&quot;http://open-services.net/ns/am#&quot;
    xmlns:oslc_rm=&quot;http://open-services.net/xmlns/rm/1.0/&quot;
    xmlns:oslc_cm=&quot;http://open-services.net/xmlns/cm/1.0/&quot;
        xmlns:trs=&quot;http://open-services.net/ns/core/trs#&quot;
    xmlns:dcterms=&quot;http://purl.org/dc/terms/&quot;
    xmlns:jfs=&quot;http://jazz.net/xmlns/prod/jazz/jfs/1.0/&quot; 
    xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;&gt;

    &lt;dcterms:title&gt;OSLC AM iotp-adaptor Jazz Root Services&lt;/dcterms:title&gt;
    &lt;oslc_am:amServiceProviders rdf:resource=&quot;&lt;%= catalogUri %&gt;&quot; /&gt;
    &lt;oslc_rm:rmServiceProviders rdf:resource=&quot;&lt;%= catalogUri %&gt;&quot; /&gt;
    &lt;oslc_cm:cmServiceProviders rdf:resource=&quot;&lt;%= catalogUri %&gt;&quot; /&gt;
    &lt;jfs:oauthRealmName&gt;IoTPlatform&lt;/jfs:oauthRealmName&gt;
    &lt;jfs:oauthDomain&gt;&lt;%= oauthDomain %&gt;&lt;/jfs:oauthDomain&gt;
    &lt;jfs:oauthRequestConsumerKeyUrl rdf:resource=&quot;&lt;%= baseUri + &quot;/services/oauth/requestKey&quot; %&gt;&quot; /&gt;
    &lt;jfs:oauthApprovalModuleUrl rdf:resource=&quot;&lt;%= baseUri + &quot;/services/oauth/approveKey&quot; %&gt;&quot; /&gt;
    &lt;jfs:oauthRequestTokenUrl rdf:resource=&quot;&lt;%= baseUri + &quot;/services/oauth/requestToken&quot; %&gt;&quot;/&gt;
    &lt;jfs:oauthUserAuthorizationUrl rdf:resource=&quot;&lt;%= baseUri + &quot;/services/oauth/authorize&quot; %&gt;&quot; /&gt;
    &lt;jfs:oauthAccessTokenUrl rdf:resource=&quot;&lt;%= baseUri + &quot;/services/oauth/accessToken&quot; %&gt;&quot;/&gt;
    &lt;!-- IoT Platform Tracked Resource Set Provider --&gt;
    &lt;iotp:trackedResourceSetProvider&gt;
        &lt;trs:TrackedResourceSetProvider&gt;
            &lt;trs:trackedResourceSet rdf:resource=&quot;&lt;%= baseUri + &quot;/services/trs&quot; %&gt;&quot; /&gt;
        &lt;/trs:TrackedResourceSetProvider&gt;        
    &lt;/iotp:trackedResourceSetProvider&gt;
&lt;/rdf:Description&gt;</code></pre></div></section></div><a role="button" aria-label="Toggle Navigation" data-toggle-class="primary-nav-is-open" data-toggle-target="body" class="close-off-canvas"></a></main></div><footer class="footer"><p>All content <a href="http://creativecommons.org/licenses/by/3.0/us/")>Creative Commons Attribution 3.0 US</a> | <a href="https://github.com/OSLC/developing-oslc-applications/issues">Report an issue</a></p></footer></body><script>window.site_url = 'https://oslc.github.io/developing-oslc-applications/';</script><script src="https://oslc.github.io/developing-oslc-applications/js/oslc.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-24416914-3', 'oslc.github.io');
ga('send', 'pageview');</script></html>