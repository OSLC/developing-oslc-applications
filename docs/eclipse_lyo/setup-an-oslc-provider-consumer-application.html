<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Setup an OSLC Provider/Consumer Application</title><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="stylesheet" href="https://oslc.github.io/developing-oslc-applications/css/oslc.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/solid.css" integrity="sha384-QokYePQSOwpBDuhlHOsX0ymF6R/vLk/UQVz3WHa6wygxI5oGTmDTv8wahFOSspdm" crossorigin="anonymous"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/fontawesome.css" integrity="sha384-vd1e11sR28tEK9YANUtpIOdjGW14pS87bUBuOIoBILVWLFnS+MCX9T6MMf0VdPGq" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,600;1,700&amp;family=Roboto+Mono&amp;display=swap" crossorigin="anonymous"><script src="https://oslc.github.io/developing-oslc-applications/js/lib/modernizr.js"></script><link rel="stylesheet" href="https://oslc.github.io/developing-oslc-applications/css/oslc_enhanced.css"></head><body><header class="header"><div class="flag"><div class="image"><button title="Main menu" role="button" aria-label="Toggle Navigation" data-toggle-class="primary-nav-is-open" data-toggle-target="body" class="navburger mustard-only"><span class="navburger-line top"></span><span class="navburger-line middle"></span><span class="navburger-line bottom"></span></button></div><div class="body"><a href="https://oslc.github.io/developing-oslc-applications/" class="flag image-link"><div class="image"><img src="https://oslc.github.io/developing-oslc-applications/img/logo-new-mobile.png" class="logo-img"></div><div class="body"><span class="logo-text"><abbr title="Open Services for Lifecycle Collaboration" class="oslc-name">OSLC</abbr><br><span class="project-name">Developer Guide</span></span></div></a></div></div></header><div class="sticky-footer-body off-canvas-wrap"><nav class="nav"><div class="menu primary"><div class="item desk-up"><a href="https://oslc.github.io/developing-oslc-applications/" class="image-link"><img src="https://oslc.github.io/developing-oslc-applications/img/logo-new-big.png" width="100" height="100" class="logo"><span class="logo-text"><abbr title="Open Services for Lifecycle Collaboration" class="oslc-name">OSLC</abbr><span class="project-name">Developer Guide</span></span></a></div><ul class="items"><li role="presentation" class="item"><a href="../"><i class="fas fa-level-up-alt"></i> One level up</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/eclipse-lyo.html">Eclipse Lyo - support for Java developers</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/eclipse-setup-for-lyo-based-development.html">Eclipse Setup for Lyo-based Development</a></li><li role="presentation" class="item current"><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/setup-an-oslc-provider-consumer-application.html">Setup an OSLC Provider/Consumer Application</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/lyo-designer.html">Lyo Designer - Toolchain modelling support</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/install-lyo-designer.html">Lyo Designer - Install</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/toolchain-modelling-workshop.html">Toolchain Modelling Workshop</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/domain-specification-modelling-workshop.html">Domain Specification Modelling Workshop</a></li><li role="presentation" class="item "><a href="https://oslc.github.io/developing-oslc-applications/eclipse_lyo/modelling-howto.html">Modelling - Howto and Advanced Topics</a></li></ul><div><iframe src="https://duckduckgo.com/search.html?width=220&site=oslc.github.io/developing-oslc-applications/&prefill=Search DuckDuckGo&kn=1" style="overflow:hidden;margin:0 0 0 13px;padding:0;width:305px;height:40px;" frameborder="0"></iframe></div></div></nav><main class="main"><div class="card"><header class="header"><h1 class="title">Setup an OSLC Provider/Consumer Application</h1></header><section class="content"><div class="copy"><h1>Create an Eclipse Lyo project</h1><p>The steps below guide you through the necessary steps of creating a Java
project with the necessary configurations to develop any OSLC server/client
using Lyo. The instructions assume you are using the Eclipse IDE, but should be
equally valid for any other development environment.</p>
<!-- omit in toc -->
<h2>Table of Contents</h2><ul>
<li><a href="#an-alternative-to-the-manual-steps-below">An alternative to the manual steps below</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#set-up-eclipse">Set up Eclipse</a></li>
<li><a href="#decide-if-you-want-to-adopt-jax-rs-10-or-20">Decide if you want to adopt JAX-RS 1.0 or 2.0?</a></li>
<li><a href="#create-a-maven-project">Create a Maven project</a></li>
<li><a href="#customise-the-project-pom-file">Customise the project POM file</a><ul>
<li><a href="#setup-general-pom-properties">Setup general POM properties</a></li>
<li><a href="#optional-add-lyo-repositories">(Optional) Add Lyo repositories</a></li>
<li><a href="#slf4j-package-dependencies">SLF4J package dependencies</a></li>
<li><a href="#servlet-dependencies">Servlet dependencies</a></li>
<li><a href="#jax-rs-implementation-dependencies">JAX-RS implementation dependencies</a><ul>
<li><a href="#for-lyo-5x">For Lyo 5.x</a></li>
<li><a href="#for-lyo-4x">For Lyo 4.x</a></li>
<li><a href="#for-lyo-240-and-earlier">For Lyo 2.4.0 and earlier</a></li>
</ul>
</li>
<li><a href="#lyo-dependencies">Lyo dependencies</a></li>
<li><a href="#oslc-oauth-support">OSLC OAuth support</a></li>
<li><a href="#oslc-client-support">OSLC Client support</a><ul>
<li><a href="#for-lyo-40">For Lyo 4.0+</a></li>
<li><a href="#for-lyo-24-and-earlier">For Lyo 2.4 and earlier</a></li>
</ul>
</li>
<li><a href="#configure-the-embedded-jetty-server-for-quick-debugging">Configure the Embedded Jetty server for quick debugging</a></li>
</ul>
</li>
<li><a href="#customise-the-web-configuration">Customise the web configuration</a></li>
<li><a href="#optional-provide-openapiswagger-support">(Optional) Provide OpenApi/Swagger Support</a><ul>
<li><a href="#add-openapiswagger-maven-dependencies">Add OpenApi/Swagger Maven dependencies</a><ul>
<li><a href="#for-lyo-500">For Lyo 5.0.0</a></li>
<li><a href="#for-lyo-410">For Lyo 4.1.0</a></li>
<li><a href="#for-lyo-240-and-earlier-1">For Lyo 2.4.0 and earlier</a></li>
</ul>
</li>
<li><a href="#co-host-swagger-ui-with-your-server">Co-host Swagger UI with your server</a></li>
<li><a href="#add-swagger-cores-jax-rs-providers-to-your-application">Add Swagger-Core&#39;s JAX-RS Providers to your Application</a></li>
<li><a href="#configure-swaggers-servlet-in-the-webxml">Configure Swagger&#39;s Servlet in the web.xml</a></li>
<li><a href="#add-openapi-annotations-almost-optional">Add OpenApi Annotations (Almost Optional)</a><ul>
<li><a href="#api">@Api</a></li>
<li><a href="#apioperation-optional">@ApiOperation (Optional)</a></li>
<li><a href="#apimodel-optional">@ApiModel (Optional)</a></li>
</ul>
</li>
<li><a href="#access-the-swagger-ui-interactive-console">Access the Swagger UI interactive console</a></li>
<li><a href="#access-openapi-specification-document-yaml-file">Access OpenAPI specification document (yaml file)</a></li>
</ul>
</li>
<li><a href="#optional-provide-trs-support">(Optional) Provide TRS Support</a><ul>
<li><a href="#add-maven-dependencies">Add Maven dependencies</a></li>
<li><a href="#setup-the-trs-jax-rs-provider-to-your-application">Setup the TRS JAX-RS Provider to your Application</a></li>
<li><a href="#update-the-trs-data-set">Update the TRS data set</a></li>
</ul>
</li>
<li><a href="#run-the-server">Run the server</a></li>
</ul>
<h2>An alternative to the manual steps below</h2><p>An alternative to the instructions on this page is to instead use <a href="./lyo-designer">Lyo Designer</a> to quickly generate the project, including a very basic code skeleton. The generated project will also include the neccessary setup for OpenApi/Swagger support, TRS, etc.</p>
<ol>
<li>Make sure your environment is setup for Lyo development as instructed on <a href="./eclipse-setup-for-lyo-based-development">Eclipse Setup for Lyo-based Development</a></li>
<li>install <a href="./install-lyo-designer">Lyo Designer</a></li>
<li>Follow the <a href="./toolchain-modelling-workshop#create-modelling-project">Create a Modelling Project</a> instructions (<em>Only this particular section</em>) to create the Eclipse project.</li>
<li>Follow the <a href="./toolchain-modelling-workshop#adaptor-interface-view">Adapter Interface</a> instructions (<em>Only this particular section</em>) to create a single Adaptor Interface in the model. You do not need to create any additional elements, such as a Service Provider Catalog, Service Provider, etc. Just make sure you set the generation settings as expected.</li>
<li>Follow the <a href="./toolchain-modelling-workshop#generate-oslc4j-java-code">Generate Lyo Java code</a> instructions (<em>Only this particular section</em>) to generate your basic project setup.</li>
<li>You are done! But of course, you can proceed with Lyo Designer to model your complete OSLC Server/Client and generate even more of your project code.</li>
</ol>
<h2>Introduction</h2><p>In the instructions below, we assume the following parameters, which you will need to adjust for your particular project:</p>
<ul>
<li>Eclipse Project Name: <em>adaptor-sample-webapp</em></li>
<li>Base Package Name for Java Classes: <em>com.sample.adaptor</em></li>
</ul>
<p>We will here only create the code skeleton. The
<a href="./toolchain-modelling-workshop">Toolchain Modelling Workshop</a> can then be used to generate the necessary code to become a fully functional server.</p>
<p>As a complement when following the instructions below, you can find sample projects under the <a href="https://github.com/OSLC/lyo-adaptor-sample-modelling">Lyo Adaptor Sample Modelling</a> git repository.</p>
<ul>
<li>For Lyo 4.1.0, please refer to the <code>main-4.x</code> branch.</li>
<li>For Lyo 5.0.0-SNAPSHOT, please refer to the <code>main-5.x</code> branch.</li>
<li>For Lyo 2.4.0, please refer to the <code>main-2.x</code> branch.</li>
</ul>
<p>Creating the project consists of these steps:</p>
<ol>
<li><a href="#setup-eclipse">Setup Eclipse</a></li>
<li><a href="#decide-jaxrs">Decide if you want to adopt JAX-RS 1.0 or 2.0?</a></li>
<li><a href="#create-maven-project">Create a Maven project</a></li>
<li><a href="#customize-project-pom-file">Customise the project POM file</a></li>
<li><a href="#customize-web-configuration">Customise the web configuration</a></li>
<li><a href="#provide-openapi-support">(Optional) Provide OpenApi/Swagger Support</a></li>
<li><a href="#provide-trs-support">(Optional) Provide TRS Support</a></li>
<li><a href="#run-server">Run the server</a></li>
</ol>
<h2>Set up Eclipse</h2><p>Make sure your environment is setup for Lyo development as instructed on <a href="./eclipse-setup-for-lyo-based-development">Eclipse Setup for Lyo-based Development</a></p>
<h2>Decide if you want to adopt JAX-RS 1.0 or 2.0?</h2><p>Starting with version 4.0.0, Lyo supports JAX-RS 2.0, and no longer depends on any particlar implementation of JAX-RS. This gives the developer the chance to adopt any preferred implementation such as <a href="https://jersey.github.io/">Jersey</a>, <a href="https://resteasy.github.io/">RESTEasy</a>, etc. </p>
<blockquote>
<p>Older Lyo releases (2.x) only supported JAX-RS 1.0 and required Apache Wink implementation, which is <strong>retired to Apache Attic</strong> since 2015). They also relied on &quot;HP Labs&quot; Jena. We recommend you adopt the latest versions of Lyo.</p>
</blockquote>
<p>The instructions below will vary depending on the Lyo version to be adopted. We will refer to the version as <em>${version.lyo}</em>, which can then take one of the two values:</p>
<ul>
<li>4.1.0</li>
<li>2.4.0 (unsupported)</li>
</ul>
<h2>Create a Maven project</h2><p>To create a Maven project from an archetype via Eclipse</p>
<ol>
<li>select <em>File -&gt; New -&gt; Other</em></li>
<li>then select <em>Maven Project</em> under <em>Maven</em> group.</li>
<li>Leave the <em>Create a simple project</em> checkbox unchecked.</li>
<li>Uncheck the <em>Use default Workspace location</em> option and point it to the project root</li>
<li>Press <em>Next</em></li>
</ol>
<p><img src="./images/CreateMavenAdaptorProject_Step1.png" alt=""></p>
<p>Next, select the <code>maven-archetype-webapp</code> archetype:</p>
<p><img src="./images/CreateMavenAdaptorProject_Step2.png" alt=""></p>
<p>Next, Fill in the <strong>Group Id</strong>, <strong>Artefact Id</strong>, and the <strong>Package Base</strong>.</p>
<ul>
<li>The <strong>Package Base</strong> value (<code>com.sample.adaptor</code> on this page) will be used as a base package for your server code.</li>
</ul>
<p><img src="./images/CreateMavenAdaptorProject_Step3.png" alt=""></p>
<p>You should now have the project in Eclipse and the following folder structure:</p>
<p><img src="./images/CreateMavenAdaptorProject_CodeStructure.png" alt=""></p>
<h2>Customise the project POM file</h2><p>We now need to modify the project <em>pom.xml</em> file.</p>
<h3>Setup general POM properties</h3><p>We need to make sure our project uses UTF-8 and JDK 1.8+ (Lyo 5.0 requires JDK 11+). We will also use properties to define a common version for Lyo packages:</p>
<pre><code class="language-xml">&lt;properties&gt;
  &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
  &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
  &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
  &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
  &lt;version.lyo&gt;ENTER-LYO-VERSION-HERE&lt;/version.lyo&gt;
&lt;/properties&gt;
</code></pre>
<p>In the snippet above, <code>ENTER-LYO-VERSION-HERE</code> is either <code>5.0.0</code> or <code>2.4.0</code> (<strong>not supported since December 2020!</strong>), depending on your choice of JAX-RS version.</p>
<h3>(Optional) Add Lyo repositories</h3><p>A Lyo project will use Lyo dependencies that we need to declare. <strong>All necessary Lyo dependencies are available on Maven Central starting with Lyo 4.0.0.</strong> If you are using Lyo 2.x, you need to add the following entry:</p>
<pre><code class="language-xml">&lt;repositories&gt;
  &lt;repository&gt;
    &lt;id&gt;lyo-releases&lt;/id&gt;
    &lt;name&gt;Eclipse Lyo Releases&lt;/name&gt;
    &lt;url&gt;https://repo.eclipse.org/content/repositories/lyo-releases/&lt;/url&gt;
    &lt;snapshots&gt;
      &lt;enabled&gt;false&lt;/enabled&gt;
    &lt;/snapshots&gt;
  &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
<p>If you wish to use the latest development snapshots, you will need the following entry:</p>
<pre><code class="language-xml">&lt;repositories&gt;
  &lt;repository&gt;
    &lt;id&gt;lyo-snapshots&lt;/id&gt;
    &lt;name&gt;Eclipse Lyo Snapshots&lt;/name&gt;
    &lt;url&gt;https://repo.eclipse.org/content/repositories/lyo-snapshots/&lt;/url&gt;
    &lt;releases&gt;
      &lt;enabled&gt;false&lt;/enabled&gt;
    &lt;/releases&gt;
  &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
<h3>SLF4J package dependencies</h3><p>Lyo uses SLF4J for logging, leaving the choice of the actual logging library to
use. We will use the simplest option:</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;
  &lt;version&gt;1.7.36&lt;/version&gt;
  &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<h3>Servlet dependencies</h3><p>We require Java EE 6 or higher and JSTL:</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
  &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
  &lt;version&gt;3.1.0&lt;/version&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
  &lt;artifactId&gt;jstl&lt;/artifactId&gt;
  &lt;version&gt;1.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3>JAX-RS implementation dependencies</h3><p>Lyo depends on JAX-RS APIs and your application needs to add implementations of those APIs.</p>
<h4>For Lyo 5.x</h4><p>For Lyo release 5.0.0 and above, you will need to choose a JAX-RS 2.0 implementation. If you are using Jersey, you should use version 2.35. <em>Note that starting with Jersey 2.26, HK2 is not bundled with the core artifacts (see the <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/2.35/user-guide.html#mig-2.26">Jersey migration guide</a>).</em></p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;
  &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;
  &lt;version&gt;2.35&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;
  &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;
  &lt;version&gt;2.35&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;
    &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;
    &lt;version&gt;2.35&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4>For Lyo 4.x</h4><p>For Lyo release 4.0.0 and above, you will need to choose a JAX-RS 2.0 implementation, such as <a href="https://jersey.github.io/">Jersey</a>, <a href="https://resteasy.github.io/">RESTEasy</a>, etc. Below is an example for Jersey.</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;
  &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;
  &lt;version&gt;2.25.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;
  &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;
  &lt;version&gt;2.25.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4>For Lyo 2.4.0 and earlier</h4><p>For Lyo release 2.4.0 (and earlier), a Lyo package includes a dependency to the <a href="https://svn.apache.org/repos/infra/websites/production/wink/content/index.html">Apache Wink implementation</a>.</p>
<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.oslc4j.core&lt;/groupId&gt;
  &lt;artifactId&gt;oslc4j-wink&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3>Lyo dependencies</h3><p>The minimal Lyo dependencies are:</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.oslc4j.core&lt;/groupId&gt;
  &lt;artifactId&gt;oslc4j-core&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.oslc4j.core&lt;/groupId&gt;
  &lt;artifactId&gt;oslc4j-jena-provider&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.oslc4j.core&lt;/groupId&gt;
  &lt;artifactId&gt;oslc4j-json4j-provider&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3>OSLC OAuth support</h3><p>If your server needs to support OAuth, include the following:</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.server&lt;/groupId&gt;
  &lt;artifactId&gt;oauth-core&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.server&lt;/groupId&gt;
  &lt;artifactId&gt;oauth-consumer-store&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.server&lt;/groupId&gt;
  &lt;artifactId&gt;oauth-webapp&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
  &lt;type&gt;war&lt;/type&gt;
&lt;/dependency&gt;
</code></pre>
<p>To support OAuth, you will need to add the following JAX-RS Providers to your Application (the <code>javax.ws.rs.core.Application</code> subclass)</p>
<pre><code class="language-java">RESOURCE_CLASSES.add(Class.forName(&quot;org.eclipse.lyo.server.oauth.webapp.services.ConsumersService&quot;));
RESOURCE_CLASSES.add(Class.forName(&quot;org.eclipse.lyo.server.oauth.webapp.services.OAuthService&quot;));
</code></pre>
<h3>OSLC Client support</h3><p>If your OSLC server also needs to consume resources from another server, a dependency to the OSLC client package is needed:</p>
<h4>For Lyo 4.0+</h4><pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.clients&lt;/groupId&gt;
  &lt;artifactId&gt;oslc-client&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4>For Lyo 2.4 and earlier</h4><pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.clients&lt;/groupId&gt;
  &lt;artifactId&gt;oslc-java-client&lt;/artifactId&gt;
  &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3>Configure the Embedded Jetty server for quick debugging</h3><p>Finally, you should use an embedded servlet container during the debugging to simplify the development process.</p>
<p>Replace the existing <code>&lt;build&gt;</code> entry with the Jetty configuration below, using the following customisations:</p>
<ul>
<li><p><em>adaptor-sample</em> is the context path that can be the same as your eclipse project name (or something more appropriate)</p>
</li>
<li><p><em>8080</em> is the port number you want to run the services on.</p>
</li>
</ul>
<p>This will make your server available under the path <a href="http://localhost:8080/adaptor-sample">http://localhost:8080/adaptor-sample</a></p>
<pre><code class="language-xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
      &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;9.4.46.v20220331&lt;/version&gt;
      &lt;configuration&gt;
        &lt;webAppConfig&gt;
          &lt;contextPath&gt;/adaptor-sample&lt;/contextPath&gt;
        &lt;/webAppConfig&gt;
        &lt;reload&gt;automatic&lt;/reload&gt;
        &lt;scanIntervalSeconds&gt;5&lt;/scanIntervalSeconds&gt;
        &lt;systemProperties&gt;
          &lt;systemProperty&gt;
            &lt;name&gt;jetty.port&lt;/name&gt;
            &lt;value&gt;8080&lt;/value&gt;
          &lt;/systemProperty&gt;
        &lt;/systemProperties&gt;
        &lt;stopKey /&gt;
        &lt;stopPort /&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<h2>Customise the web configuration</h2><p>Modify the parameters in <code>/src/main/webapp/WEB-INF/web.xml</code> according to the template below.</p>
<ul>
<li><em>Adaptor Sample</em> could be the same as your eclipse project name (or something more appropriate)</li>
<li><em>com.sample.adaptor</em> should be the same as the base package name for your project.</li>
<li><em>8080</em> should match the port number specified in the POM file for Jetty configuration.</li>
<li><code>ENTER-SERVLET-CLASS-HERE</code> depends on the Lyo version and choice of JAX-RS implementation:<ul>
<li>For <code>4.0.0</code> and higher, use the Jersey implementation: <code>org.glassfish.jersey.servlet.ServletContainer</code></li>
<li>For <code>2.4.0</code>, use the legacy Wink implementation: <code>org.apache.wink.server.internal.servlet.RestServlet</code></li>
</ul>
</li>
</ul>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;
  id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;
  &lt;display-name&gt;Adaptor Sample&lt;/display-name&gt;
  &lt;context-param&gt;
    &lt;description&gt;Base URI for the adaptor.&lt;/description&gt;
    &lt;param-name&gt;com.sample.adaptor.servlet.baseurl&lt;/param-name&gt;
    &lt;param-value&gt;http://localhost:8080&lt;/param-value&gt;
  &lt;/context-param&gt;
  &lt;listener&gt;
    &lt;description&gt;Listener for ServletContext lifecycle changes&lt;/description&gt;
    &lt;listener-class&gt;com.sample.adaptor.servlet.ServletListener&lt;/listener-class&gt;
  &lt;/listener&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;JAX-RS Servlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;ENTER-SERVLET-CLASS-HERE&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;javax.ws.rs.Application&lt;/param-name&gt;
      &lt;param-value&gt;com.sample.adaptor.servlet.Application&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;JAX-RS Servlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</code></pre>
<h2>(Optional) Provide OpenApi/Swagger Support</h2><p>With OSLC being based on REST, an OSLC Server can relatively easily be documented using <a href="https://swagger.io/">OpenApi/Swagger</a>. </p>
<p>The instructions below are based on <a href="https://github.com/swagger-api/swagger-core/wiki/Swagger-Core-JAX-RS-Project-Setup-1.5.X">Swagger Core JAX RS Project Setup 1.5.X</a>, compiled for a typical Lyo project. The instructions are also partially base on 
<a href="https://medium.com/shark-bytes/co-hosting-swagger-ui-with-your-jersey-rest-api-using-maven-dependencies-44d88ae85bf8">Co-hosting Swagger UI with your Jersey REST API using Maven dependencies</a>. The instructions provide the minimal settings necessary for a Lyo project.</p>
<h3>Add OpenApi/Swagger Maven dependencies</h3><p>Add the following Swagger dependency to your maven pom.xml file</p>
<h4>For Lyo 5.0.0</h4><p>Assuming you are adopting the Jersey implementation with the version specified above.</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;
  &lt;artifactId&gt;swagger-jaxrs2&lt;/artifactId&gt;
  &lt;version&gt;2.1.4&lt;/version&gt;
  &lt;exclusions&gt;
    &lt;exclusion&gt;
      &lt;!--should be &lt;provided&gt;--&gt;
      &lt;groupId&gt;jakarta.activation&lt;/groupId&gt;
      &lt;artifactId&gt;jakarta.activation-api&lt;/artifactId&gt;
    &lt;/exclusion&gt;
  &lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;
  &lt;artifactId&gt;swagger-jaxrs2-servlet-initializer-v2&lt;/artifactId&gt;
  &lt;version&gt;2.1.4&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4>For Lyo 4.1.0</h4><p>Assuming you are adopting the Jersey implementation with the version specified above.</p>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;io.swagger&lt;/groupId&gt;
  &lt;artifactId&gt;swagger-jersey2-jaxrs&lt;/artifactId&gt;
  &lt;version&gt;1.5.22&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4>For Lyo 2.4.0 and earlier</h4><pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;io.swagger&lt;/groupId&gt;
  &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;
  &lt;version&gt;1.5.17&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3>Co-host Swagger UI with your server</h3><p>The following steps provide the end-user with an interactive console to the OSLC services, by integrating <a href="https://swagger.io/swagger-ui/">Swagger UI</a> with your OSLC server.</p>
<p>Add the following plugins to the existing <code>&lt;plugins&gt;</code> entry of your <code>pom.xml</code> file. These plugins download and extract the necessary <code>Swagger UI</code> files from <a href="https://github.com/swagger-api/swagger-ui">Swagger UI GitHub project</a> onto your project:</p>
<pre><code class="language-xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
    ...
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;!-- Download Swagger UI webjar. --&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.1.2&lt;/version&gt;
      &lt;executions&gt;
          &lt;execution&gt;
              &lt;phase&gt;prepare-package&lt;/phase&gt;
              &lt;goals&gt;
                  &lt;goal&gt;unpack&lt;/goal&gt;
              &lt;/goals&gt;
              &lt;configuration&gt;
                  &lt;artifactItems&gt;
                      &lt;artifactItem&gt;
                          &lt;groupId&gt;org.webjars&lt;/groupId&gt;
                          &lt;artifactId&gt;swagger-ui&lt;/artifactId&gt;
                          &lt;version&gt;3.25.0&lt;/version&gt;
                      &lt;/artifactItem&gt;
                  &lt;/artifactItems&gt;
                  &lt;outputDirectory&gt;${project.build.directory}/swagger-ui&lt;/outputDirectory&gt;
              &lt;/configuration&gt;
          &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;!-- Add Swagger UI resources to the war file. --&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.2.3&lt;/version&gt;
      &lt;configuration&gt;
          &lt;webResources combine.children=&quot;append&quot;&gt;
              &lt;resource&gt;
                  &lt;directory&gt;${project.build.directory}/swagger-ui/META-INF/resources/webjars/swagger-ui/3.25.0&lt;/directory&gt;
                  &lt;includes&gt;
                      &lt;include&gt;**/*.*&lt;/include&gt;
                  &lt;/includes&gt;
                  &lt;targetPath&gt;/swagger-ui/dist&lt;/targetPath&gt;
              &lt;/resource&gt;
          &lt;/webResources&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<h3>Add Swagger-Core&#39;s JAX-RS Providers to your Application</h3><p>Add swagger-core&#39;s JAX-RS Providers to the Application class that extends <code>javax.ws.rs.core.Application</code></p>
<pre><code class="language-java">public class Application extends javax.ws.rs.core.Application {
  private static final Set&lt;Class&lt;?&gt;&gt; RESOURCE_CLASSES = new HashSet&lt;Class&lt;?&gt;&gt;();
    static
    {
      ...
      RESOURCE_CLASSES.add(io.swagger.jaxrs.listing.ApiListingResource.class);
      RESOURCE_CLASSES.add(io.swagger.jaxrs.listing.SwaggerSerializers.class);
      ...
    }
    ...
</code></pre>
<h3>Configure Swagger&#39;s Servlet in the web.xml</h3><p>Add the following to your web.xml:</p>
<ul>
<li><em>swagger.api.basepath</em> depends on your particular settings, as instructed above.</li>
</ul>
<pre><code class="language-xml">  &lt;servlet&gt;
    &lt;servlet-name&gt;DefaultJaxrsConfig&lt;/servlet-name&gt;
    &lt;servlet-class&gt;io.swagger.jaxrs.config.DefaultJaxrsConfig&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;api.version&lt;/param-name&gt;
      &lt;param-value&gt;1.0.0&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;swagger.api.basepath&lt;/param-name&gt;
      &lt;param-value&gt;http://localhost:8080/adaptor-sample/services/&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;
  &lt;/servlet&gt;
</code></pre>
<h3>Add OpenApi Annotations (Almost Optional)</h3><p>The OpenApi documentation can be achieved with as little as adding <em>@Api</em> to each REST/OSLC service in your project. This is detailed in the first step below. While the remaining intructions are optional, they are highly recommended to provide a documentation that can best reflect the OSLC services.</p>
<h4>@Api</h4><ol>
<li>For each REST service (ie. OSLC Service), simply add the <em>@Api</em> annotation.</li>
<li>(<em>OPTIONAL</em>) add the <em>value</em> and <em>description</em> details. The <em>value</em> is used to group the REST methods into common categories, helping in the structuring of the methods in the documentaton. You can give it the same value as that of the @Path annotation, collecting all REST methods for the same service together.</li>
</ol>
<pre><code class="language-java">@Api(value = &quot;requirements&quot;, description = &quot;OSLC service for resources of type&quot; + &quot;Requirement&quot;)
@OslcService(Oslc_rmDomainConstants.REQUIREMENTS_MANAGEMENT_DOMAIN)
@Path(&quot;requirements&quot;)
</code></pre>
<h4>@ApiOperation (Optional)</h4><p>For each REST method, add the <em>@ApiOperation</em> Swagger annotation.</p>
<p><strong>Important</strong>: In <a href="https://swagger.io/docs/specification/paths-and-operations/">OpenApi</a>, an operation is defined as unique through the combination of its path and method. This means that two C.R.U.D. methods for the same path are not allowed – even if they have different parameters (including Accept and Content-Type annotations).</p>
<ul>
<li>Example: Your OSLC Service may define two different Java methods to separately handle HTML and RDF/XML content types. OpenApi will only recognise one of these two methods, while ignoring the other.</li>
<li>Workaround: Annotate ALL methods that are identified as unique with the complete list of media types in the <em>produces</em> property of the @ApiOperation annotation. This way, the generated documentation correctly indicates the existance of all methods.</li>
</ul>
<pre><code class="language-java">    @GET
    @ApiOperation(value = &quot;GET on Requirement resources&quot;,
        produces = OslcMediaType.APPLICATION_RDF_XML + &quot;, &quot; + MediaType.TEXT_HTML)
    @Path(&quot;{requirementId}&quot;)
    @Produces(OslcMediaType.APPLICATION_RDF_XML)
    public Requirement getRequirement(
</code></pre>
<h4>@ApiModel (Optional)</h4><p>For each Java class that models an OSLC-resource (@OslcName annotation), add an <em>@ApiModel</em> annotation that refers to the Shape of the resource, since a Shape is a more accurate description of the object, than the one automatically generated by Swagger.</p>
<pre><code class="language-java">@ApiModel(description = &quot;The  model below is only a object structure as derived by swagger.  For a more accurate RDF Description, refer to the Requirement Resource Shape.&quot;)
@OslcNamespace(Oslc_rmDomainConstants.REQUIREMENT_NAMESPACE)
@OslcName(Oslc_rmDomainConstants.REQUIREMENT_LOCALNAME)
@OslcResourceShape(title = &quot;Requirement Resource Shape&quot;, describes = Oslc_rmDomainConstants.REQUIREMENT_TYPE)
public class Requirement
...
</code></pre>
<h3>Access the Swagger UI interactive console</h3><p>Before you can access the <a href="https://swagger.io/swagger-ui/">Swagger UI</a> interactive console for the first time, edit the <code>swagger-ui/index.html</code> file, replacing the url <code>http://petstore.swagger.io/v2/swagger.json</code> with the url of your own yaml file <code>http://localhost:8080/adaptor-sample/services/swagger.yaml</code>.</p>
<p>The generated interactive API console can be accessed via</p>
<pre><code>http://localhost:8080/adaptor-sample/swagger-ui/
</code></pre>
<h3>Access OpenAPI specification document (yaml file)</h3><p>You can also access the OpenAPI specification document (yaml file) at:</p>
<pre><code>http://localhost:8080/adaptor-sample/services/swagger.yaml
</code></pre>
<p>You can copy the yaml file to a <a href="https://editor.swagger.io">Swagger Editor</a>, to view the API documentation, as well as generate client/Server SDK code for a number of languages and platforms.</p>
<h2>(Optional) Provide TRS Support</h2><p>The <em>TRS Server</em> library is a set of ready-to-use classes that provide the required REST services for TRS, with minimal effort. 
The current implementation supports an In-memory TRS Server that does not persist its TRS resources.
These classes are however designed to be extended for a persistent solution. 
For a thourough walkthough of TRS solutions, which among other things ensures persisting the TRS Logs, visit the <a href="./eclipse-lyo#trs-sdk">additional information on TRS</a>  </p>
<h3>Add Maven dependencies</h3><p>Add a dependency for the TRS Server library:</p>
<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lyo.trs&lt;/groupId&gt;
  &lt;artifactId&gt;trs-server&lt;/artifactId&gt;
    &lt;version&gt;${version.lyo}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3>Setup the TRS JAX-RS Provider to your Application</h3><p>The <em>TRS Server</em> library already contains a <code>TrackedResourceSetService</code> class  that can handle the REST calls for TRS Base and ChangeLog. For this service to work, you will only need to provide a binding to a singleton of a class that implements the <code>PagedTrs</code> class.</p>
<p>Register the TRS JAX-RS Provider <code>TrackedResourceSetService</code> in your Application (the <code>javax.ws.rs.core.Application</code> subclass).</p>
<pre><code class="language-java">import org.eclipse.lyo.oslc4j.trs.server.service.TrackedResourceSetService;
...
public class Application extends javax.ws.rs.core.Application {
    private static final Set&lt;Class&lt;?&gt;&gt;         RESOURCE_CLASSES                          = new HashSet&lt;Class&lt;?&gt;&gt;();
    static
    {
      ...
      RESOURCE_CLASSES.add(TrackedResourceSetService.class);
      ...
    }
    ...
</code></pre>
<p>Provide the necessary binding definition for the  <code>PagedTrs</code> class.</p>
<pre><code class="language-java">import java.util.Collections;
import org.eclipse.lyo.oslc4j.trs.server.PagedTrs;
import com.sample.adaptor.InmemPagedTrsSingleton;
import org.glassfish.hk2.utilities.binding.AbstractBinder;
...
public class Application extends javax.ws.rs.core.Application {
    ...
    @Override
    public Set&lt;Object&gt; getSingletons() {
        return Collections.singleton(new AbstractBinder() {
            @Override
            protected void configure() {
                bindFactory(new InmemPagedTrsSingleton()).to(PagedTrs.class);
            }
        });
    }
</code></pre>
<p>Define the <code>InmemPagedTrsSingleton</code> singleton class. You will need to complete the code example below, with</p>
<ul>
<li>the code that populates  <code>uris</code> with the intial set of resources to be managed by <code>InmemPagedTrs</code>. </li>
<li>the desired <code>basePageLimit</code> and <code>changelogPageLimit</code> parameters.</li>
</ul>
<pre><code class="language-java">package com.sample.adaptor;

import java.net.URI;
import java.util.ArrayList;
import java.util.Iterator;

import javax.ws.rs.core.UriBuilder;
import org.eclipse.lyo.oslc4j.core.OSLC4JUtils;
import org.eclipse.lyo.oslc4j.trs.server.InmemPagedTrs;
import org.eclipse.lyo.oslc4j.trs.server.PagedTrs;
import org.eclipse.lyo.oslc4j.trs.server.service.TrackedResourceSetService;
import org.glassfish.hk2.api.Factory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class InmemPagedTrsSingleton implements Factory&lt;PagedTrs&gt; {
    private final static Logger log = LoggerFactory.getLogger(InmemPagedTrsSingleton.class);
    private static InmemPagedTrs inmemPagedTrs;

    @Override
    public InmemPagedTrs provide() {
        return getInmemPagedTrs();
    }

    @Override
    public void dispose(final PagedTrs instance) {
        log.debug(&quot;{} is getting disposed&quot;, instance);
    }

    public static InmemPagedTrs getInmemPagedTrs() {
        if(inmemPagedTrs == null) {
            log.debug(&quot;Initialising &#39;InmemPagedTrs&#39; instance&quot;);
            
            ArrayList&lt;URI&gt; uris = new ArrayList&lt;URI&gt;();
            
            //TODO: populate uris with the intial set of resources to be managed by the InmemPagedTrs instance
            ....
            // not thread-safe
            inmemPagedTrs = new InmemPagedTrs(&lt;basePageLimit&gt;, &lt;changelogPageLimit&gt;,
                UriBuilder.fromUri(OSLC4JUtils.getServletURI()).path(TrackedResourceSetService.RESOURCE_PATH).build(), 
                TrackedResourceSetService.BASE_PATH, TrackedResourceSetService.CHANGELOG_PATH, uris);
        }
        return inmemPagedTrs;
    }
}
</code></pre>
<p>The application is now ready to respond to REST requests from a TRS Client. Once running, the server will respond to requests on the relative path <code>/trs</code>.</p>
<h3>Update the TRS data set</h3><p>To update the set of OSLC resources that form the TRS Base and ChangeLog, simply call the following methods in your code:</p>
<ul>
<li><code>InmemPagedTrsSingleton.getInmemPagedTrs().onCreated(aResource);</code></li>
<li><code>InmemPagedTrsSingleton.getInmemPagedTrs().onModified(aResource);</code></li>
<li><code>InmemPagedTrsSingleton.getInmemPagedTrs().onDeleted(aResource.getAbout());</code></li>
</ul>
<h2>Run the server</h2><p>Once the server is developed, you can run it by selecting <em>Run As ➞ Maven build ...</em> from the project&#39;s context menu, and setting the goal to <code>clean jetty:run-war</code>.</p>
<p>You can now access your server from <a href="http://localhost:8080/adaptor-sample">http://localhost:8080/adaptor-sample</a></p>
<ul>
<li><em>adaptor-sample</em> and <em>8080</em> will depend on your particular settings, as instructed above.</li>
</ul>
<blockquote>
<p><strong>Pro Tip:</strong> If you get the error <em>Project configuration is not up-to-date with pom.xml</em>, simply right click on the eclipse project and select <em>Maven ➞ Update Project</em> ...</p>
</blockquote>
</div></section></div><a role="button" aria-label="Toggle Navigation" data-toggle-class="primary-nav-is-open" data-toggle-target="body" class="close-off-canvas"></a></main></div><footer class="footer"><p>Content licensed under <a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 US</a> | <a href="https://github.com/OSLC/developing-oslc-applications/edit/gh-pages/_harp/eclipse_lyo/setup-an-oslc-provider-consumer-application.md" target="_blank" style="font-weight: bold"><i class="fas fa-pencil-alt"></i> Edit this page</a> | <a href="https://github.com/OSLC/developing-oslc-applications/issues">Report an issue</a> | <a href="https://open-services.net/" target="_blank">Open Services for Lifecycle Collaboration</a> <i class="fas fa-external-link-alt"></i></p></footer></body><script>window.site_url = 'https://oslc.github.io/developing-oslc-applications/';</script><script src="https://oslc.github.io/developing-oslc-applications/js/oslc.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ER4THK2G7V"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ER4THK2G7V', {'anonymize_ip' : true, 'client_storage': 'none'});</script></html>